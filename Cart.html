<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Cart - Sewa Shubham Bakery</title>
  <link rel="stylesheet" href="Seva.css">






</head>
<body class="cart-page">
  <nav class="navbar">
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="Menu.html">Menu</a></li>
      <li><a href="Contact.html">Contact</a></li>
      <li class="cart-link"><a href="Cart.html">ðŸ›’ Your Cart</a></li>
    </ul>
  </nav>

  <header>
    <h1 class="rise-effect">Your Cart</h1>
    <p class="rise-effect">Items you've selected will appear here.</p>
  </header>

 <div id="cart-items" class="cart-grid">
  <!-- Cart items will be injected here -->
</div>




<script>
  const cartContainer = document.getElementById('cart-items');
  let cart = JSON.parse(localStorage.getItem('cart')) || [];

  function renderCart() {
    cartContainer.innerHTML = '';

    if (cart.length === 0) {
      cartContainer.innerHTML = "<p>Your cart is empty.</p>";
      return;
    }

    cart.forEach((item, index) => {
      const card = document.createElement('div');
      card.className = 'product-card';
      card.innerHTML = `
        <img src="${item.image}" alt="${item.name}">
       <p>Price: ${item.price}</p>
       <p>Quantity: ${item.quantity}</p>

        <p>Quantity: ${item.quantity}</p>
        <button class="remove-btn" data-index="${index}">Remove</button>
      `;
      cartContainer.appendChild(card);
    });

    // Add event listeners to remove buttons
    document.querySelectorAll('.remove-btn').forEach(button => {
      button.addEventListener('click', () => {
        const index = button.getAttribute('data-index');
        cart.splice(index, 1);
        localStorage.setItem('cart', JSON.stringify(cart));
        renderCart(); // re-render after removal
      });
    });
  }

  renderCart();
</script>




<script src="https://checkout.razorpay.com/v1/checkout.js"></script>





</body>
</html>



<script>
  const cartContainer = document.getElementById('cart-items');
  const cart = JSON.parse(localStorage.getItem('cart')) || [];

  if (cart.length === 0) {
    cartContainer.innerHTML = "<p>Your cart is empty.</p>";
  } else {
    cart.forEach(item => {
      const card = document.createElement('div');
      card.className = 'product-card';
      card.innerHTML = `
        <img src="${item.image}" alt="${item.name}">
        <h3>${item.name}</h3>
        <p>Quantity: ${item.quantity}</p>
      `;
      cartContainer.appendChild(card);
    });
  }
</script>


<!-- ðŸ›’ Checkout Form -->
<form id="orderForm" style="margin-top:20px; text-align:center;">
  <label for="email">Email:</label><br>
  <input type="email" id="email" name="email" required
      placeholder="Enter your email" style="padding:8px; margin:10px;"><br>

  <label for="phone">Phone Number:</label><br>
  <input type="tel" id="phone" name="phone" required
      placeholder="Enter your phone number" style="padding:8px; margin:10px;"><br>

  <label for="location">Location:</label><br>
  <input type="text" id="location" name="location" required
      placeholder="Enter your location" style="padding:8px; margin:10px;"><br>
</form>






<div class="checkout">
  <button id="proceed-btn">Proceed to Payment</button>
</div>


 <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
  emailjs.init("Hple3XadZ-162DL5-"); // Replace with your actual EmailJS user ID

  document.getElementById('proceed-btn').addEventListener('click', () => {
    const email = document.getElementById('email').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const location = document.getElementById('location').value.trim();

    if (!email || !phone || !location) {
      alert("Please enter email, phone number and location before proceeding to payment.");
      return;
    }

    // âœ… Send email via EmailJS
    emailjs.send("service_yhfq3hg", "template_5wtax53", {
      name: "Customer",
      email: email,
      phone: phone,
      location: location
    }).then(function(response) {
      console.log("SUCCESS!", response.status, response.text);
      alert("Your details have been sent to the bakery owner.");

      // âœ… Razorpay payment flow (inside .then block)
      var options = {
        "key": "YOUR_RAZORPAY_KEY_ID", // Replace with your Razorpay key
        "amount": amountInPaise, // dynamically set
        "currency": "INR",
        "name": "Sewa Shubham Bakery",
        "description": "Order Payment",
        "image": "logo.png",
        "handler": function (response) {
          alert("Payment successful! Payment ID: " + response.razorpay_payment_id);
        },
        "prefill": {
          "email": email,
          "contact": phone
        },
        "theme": {
          "color": "#28a745"
        }
      };

      var rzp = new Razorpay(options);
      rzp.open();

    }, function(error) {
      console.log("FAILED...", error);
      alert("There was an error sending your details. Please try again.");
    });
  });
</script>





